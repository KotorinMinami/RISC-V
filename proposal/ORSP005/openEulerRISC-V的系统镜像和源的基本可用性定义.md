# ORSP005 openEuler RISC-V 测试规范
# 附加规范《openEuler RISC-V的系统镜像和源的基本可用性定义》

## Meta info

提议者：罗云翔，席静

时间：2022-06-20

## 1. 基本可用性定义

openEuler RISC-V的系统镜像和源的基本可用性定义为：

1. 软件包可构建成功
2. 镜像可成功构建，镜像预装软件可成功安装
3. 系统基本功能正常
4. 构建工具和重点应用基本功能正常
5. 系统可在支持的开发板上正常启动和运行

openEuler RISC-V根据测试的必要程度，成熟程度，可执行的测试如表1，其中重体部分对应上述1-5基本可用性。

<center>表1. openEuler RISC-V测试</center>

| 是否属于基本可用性 | 测试子项                                         | 创新版本                         | LTS版本                          | 测试对象         | 测试人员                | 依赖                                                      |
| ------------------ | ------------------------------------------------ | -------------------------------- | -------------------------------- | ---------------- | ----------------------- | --------------------------------------------------------- |
| 否                 | 上游社区测试                                     | 上游社区开发者测试               | 上游社区开发者测试               | 单组件包         | Maintainer及开发者      |                                                           |
| **是**             | **构建测试**                                     | **Make check检查**               | **Make check检查**               | **单组件包**     | **开发者**              | **软件包自带测试用例，在spec make check中进行描述和执行** |
| 否                 | 加固测试                                         | 开发者加固测试/白盒测试          | 开发者加固测试/白盒测试          | 单组件包         | 开发者                  | 原生和新增测试用例，需要开发者开发贡献                    |
| **是**             | **安装部署**                                     | **各类安装模式覆盖**             | **各类安装模式覆盖**             | **镜像和镜像源** | **开发者/CI门禁**       |                                                           |
| 否                 | 包管理                                           | 安装/卸载/升级/编译/一致性/命令  | 安装/卸载/升级/编译/一致性/命令  |                  | 测试员/社区用户众测     |                                                           |
| 否                 | 升级                                             | 系统升级                         | 系统升级                         |                  | 测试员/社区用户众测     |                                                           |
| **是**             | **系统功能**                                     | **服务/用户/网络/存储/文件系统** | **服务/用户/网络/存储/文件系统** |                  | **测试员/社区用户众测** |                                                           |
| 否                 | 开源新特性                                       | 接口/函数/功能测试               | 接口/函数/功能测试               |                  | 测试员/社区用户众测     | 《需求文档》和changelog                                   |
| 否                 | 虚拟化                                           | 虚拟化基本功能                   | 虚拟化基本功能                   |                  | 测试员/社区用户众测     |                                                           |
| 否                 | 内核                                             | LTP等开源测试套件                | LTP等开源测试套件                |                  | 测试员                  |                                                           |
| 否                 | 容器                                             | 容器基本功能                     | 容器基本功能                     |                  | 测试员                  |                                                           |
| **是**             | **构建工具**                                     | **osc、rpmbuild基本功能**        | **osc、rpmbuild基本功能**        |                  | **测试员/社区用户众测** |                                                           |
| **是**             | **xfce**                                         | **系统桌面基本功能**             | **系统桌面基本功能**             |                  | **社区用户众测**        |                                                           |
| **是**             | **firefox**                                      | **firefox浏览器基本功能**        | **firefox浏览器基本功能**        |                  | **社区用户众测**        |                                                           |
| **是**             | **其它重点软件（办公、邮件、媒体、编程工具等）** | **软件基本功能**                 | **软件基本功能**                 |                  | **社区用户众测**        |                                                           |
| 否                 | 安全                                             | 安全扫描Fuzz测试                 | 安全扫描Fuzz测试                 |                  |                         |                                                           |
| 否                 | 性能                                             | 开源benchmark                    | 开源benchmark应用场景性能        |                  |                         |                                                           |
| 否                 | 压力稳定性                                       | 开源加压工具LTP+业务随机并发     | 开源加压工具LTP+业务随机并发     |                  |                         |                                                           |
| 否                 | 可靠性                                           |                                  | 故障注入                         |                  |                         |                                                           |
| **是**             | **兼容性（内核驱动支持）**                       |                                  | **生态兼容性验证**               |                  | **测试员**              | **RISCV开发板**                                           |
| 否                 | 场景                                             | 有                               | 集成用户场景测试服务类测试       |                  |                         |                                                           |

## 2. 基本系统可在支持的开发板上运行可用性对应的包

### 2.1 软件包可构建成功

构建测试包括所有移植的包，执行Make check检查，工作由开发人员完成。

### 2.2 镜像构建成功，镜像预装软件可安装

openEuler 22.03 LTS RISCV镜像需安装包列表如下，下述包应成功安装，工作由开发人员（使用CI门禁）完成。

```bash
systemd
vim
coreutils
net-tools
systemd-udev
libssh
openssh
passwd
NetworkManager
dnf
wget
procps-ng
dnf-plugins-core
rpm-build
autoconf
make
gdb
dnf-utils
git
texinfo
gcc
gcc-c++
hostname
osc
build
sudo
iputils
ntpdate
vim
cpio
curl
perl-Compress-Zlib
perl-TimeDate
perl-Data-Dumper
perl-XML-Parser
screen
psmisc
bash
binutils
bsdtar
lzma
util-linux
openslp
lvm2
perl-Digest-MD5
git
screen
tmux
wget
expect
iproute
yum
kernel
fakeroot
```

## 3. 系统基本功能正常

发行版操作系统预装软件功能正常，系统基本功能包括服务/用户/网络/存储/文件系统功能，测试由测试员和社区用户完成。

```
包管理
WIFI
网络
蓝牙
背景
外观
通知
搜索
声音
电源
显示器内核驱动
鼠标和触摸板
可移动介质
区域和语言内核驱动
用户
应用——终端
应用——文件管理器
应用——磁盘
应用——截图
应用——密码和密钥
应用——日历
应用——日志
应用——软件更新器
应用——软件和更新
应用——VIM
应用——字符
应用——字体
GCC
常用命令
```

## 4. 构建工具和重点应用基本功能正常

构建工具和重点应用基本功能正常，测试由测试员和社区用户完成。测试软件包括

```
osc
rpmbuild
xfce
firefox
thunderbird
```

## 5. 系统可在支持的开发板上正常运行

系统可在支持的开发板上正常启动和运行，可识别对应开发板的硬件设备。

```
系统可在开发板上正常启动
识别所有板上硬件设备
```

openEuler 22.03 LTS RISC-V支持开发板列表
1. D1                                         
2. Unmatched                                      
3. Visionfive

