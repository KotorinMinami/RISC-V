# ORSP003 openEuler RISC-V 软件源暂定运行机制

## Meta info

提议者：周嘉诚、席静、吴伟

时间：2022-04-08

## 背景 / Background

目前 openEuler RISC-V 尚无明确的持续发布形式，现存可用于测试的开发快照镜像和软件仓库均为数月以前制作，与开发状态在相当程度上不相符合。开发团队和测试团队仍在使用旧版本快照配合 OBS 系统的临时软件源进行工作。

## 问题 / Issues

1. openEuler RISC-V 目前没有在持续维护更新的正式软件源。OBS 系统的临时软件源变动程度较高且无法完全保证可用程度。线上现存两个软件源均处于完全静止的停滞状态。
2. openEuler RISC-V 目前的开发快照镜像由开发者人工不定时产出，且暂时只面向 QEMU 一个构建对象。缺乏自动化构建的开发快照镜像。

## 提议 / Proposal

1. openEuler RISC-V SIG 与 TARSIER 团队共同建立持续维护更新的 openEuler RISC-V 软件源，在短期内建立初步可用性。
2. 软件源在尚未健全的过渡阶段将提供一个初始的更新源，由开发者结合 OBS 系统的构建产出进行手动筛选验证、通过协作文档汇总并统一释放，以保证初始 package base 的可用性。
3. 参照其他发行版的实行方式，软件源后续将根据软件包的稳定性差异面向不同用户提供三个差异化更新源，暂定为实时开发仓库、半稳定的测试仓库与稳定仓库。
4. 实时仓库的软件包来源于 OBS 构建系统，滚动升级，版本最新。此仓库面向开发用途，对使用者不提供任何稳定性保障。
5. 测试仓库的软件包由开发测试团队短期测试后自实时仓库释放，更新频次略低，版本次新。此仓库面向测试和资深用户尝鲜用途，对使用者提供部分稳定性保障。
6. 稳定仓库的软件包由测试团队长期多次测试确认无误后自测试仓库释放，更新频次最低，版本最旧。此仓库面向一般最终用户生产生活用途，对使用者提供完整有限稳定性保障。
7. 软件源将在 openEuler RISC-V 现有发布工具基础上每特定周期为未发布大版本的所有仓库提供自动化构建的快照镜像，初期支持 QEMU、Nezha/D1 和 Unmatched 三个构建对象，后续增加 VisionFive 等更多对象。
8. 实时仓库的快照镜像随着开发活动的进行每个构建周期提供一个全新的版本。测试仓库的快照镜像每数个构建周期提供一个新的版本，期间内容保持一致。稳定仓库的快照镜像与稳定分支最近小版本的内容一直保持一致。
8. 相关权责信息在 gitee:openEuler/RISC-V 仓库中进行维护。

## 时间线 / Timeline

2022-04-15: 软件源的初始更新源具备可用性，对外开放同步到至少一个下游。（周嘉诚）

2022-05-01: 软件源面向不同用户的三个更新源均构建完成对外开放，每日提供更新。开发仓库单次完整构建周期小于等于 48 小时。开发仓库开始每个构建周期提供 QEMU、Nezha/D1 和 Unmatched 三个构建对象的快照镜像。

2022-06-01: 开发仓库和测试仓库单次完整构建周期之和小于等于 24 小时。测试仓库开始每个构建周期提供此时所有构建对象的开发快照镜像。

## 资源 / Resources

- openEuler RISC-V SIG 负责方向及路线规划、与 openEuler 各 SIG 进行沟通协调。
- 中国科学院软件研究所 Tarsier 团队投入不少于 600 人月及必要的硬件资源。